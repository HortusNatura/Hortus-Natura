var I=Object.defineProperty;var g=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var h=(t,a,l)=>a in t?I(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,x=(t,a)=>{for(var l in a||(a={}))L.call(a,l)&&h(t,l,a[l]);if(g)for(var l of g(a))M.call(a,l)&&h(t,l,a[l]);return t};import{i as T,r as i,j as r}from"./main-577.js";import{e as E,_ as Z,d as s}from"./bi.655.81.js";import{S as D}from"./bi.880.909.js";import{e as R}from"./bi.787.676.js";import{I as A}from"./bi.672.677.js";import O from"./bi.645.302.js";import{h as B,c as S}from"./bi.674.854.js";import{Z as V}from"./bi.463.855.js";import"./bi.827.680.js";import"./bi.587.674.js";import"./bi.934.737.js";import"./bi.622.681.js";function le({formFields:t,setFlow:a,flow:l,allIntegURL:f}){const k=T(),[_,b]=i.useState(!1),[y,m]=i.useState({}),[o,p]=i.useState(1),[C,c]=i.useState({show:!1}),N=[{key:"name",label:"Name",required:!0},{key:"phone",label:"Phone",required:!1},{key:"mobile",label:"Mobile",required:!1},{key:"email",label:"Email",required:!1},{key:"description",label:"Description",required:!1},{key:"line1",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"fax",label:"Fax",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"skype",label:"Skype",required:!1},{key:"linkedin",label:"LinkedIn",required:!1},{key:"twitter",label:"Twitter",required:!1}],v=[{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!0},{key:"title",label:"Title",required:!1},{key:"phone",label:"Phone",required:!1},{key:"mobile",label:"Mobile",required:!1},{key:"email",label:"Email",required:!1},{key:"description",label:"Description",required:!1},{key:"line1",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"fax",label:"Fax",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"skype",label:"Skype",required:!1},{key:"linkedin",label:"LinkedIn",required:!1},{key:"twitter",label:"Twitter",required:!1}],F=[{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!0},{key:"title",label:"Title",required:!1},{key:"phone",label:"Phone",required:!1},{key:"mobile",label:"Mobile",required:!1},{key:"fax",label:"Fax",required:!1},{key:"website",label:"Website",required:!1},{key:"email",label:"Email",required:!1},{key:"description",label:"Description",required:!1},{key:"line1",label:"Street",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"skype",label:"Skype",required:!1},{key:"linkedin",label:"LinkedIn",required:!1},{key:"twitter",label:"Twitter",required:!1}],j=[{key:"name",label:"Deal Name",required:!0},{key:"value",label:"Value",required:!1},{key:"estimated_close_date",label:"Estimated Close Date",required:!1},{key:"added_at",label:"Added On",required:!1},{key:"last_stage_change_at",label:"Last Moved Stage On",required:!1}],[e,d]=i.useState({name:"Zendesk",type:"Zendesk",api_key:"",field_map:[{formField:"",zendeskFormField:""}],actionName:"",organizationFields:N,contactFields:v,leadFields:F,dealFields:j,actions:{}}),w=()=>{b(!0),R(l,a,f,e,k,"","",b).then(u=>{var q;u.success?(s.success((q=u.data)==null?void 0:q.msg),k(f)):s.error(u.data||u)})},P=n=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!S(e)){s.error("Please map mandatory fields");return}if(e.actionName==="lead"||e.actionName==="deal"){if(!e.selectedCRMCompany){s.error("Please select a company");return}if(!e.selectedCRMContact){s.error("Please select a contact");return}if(!e.selectedCRMSources&&e.actionName==="lead"){s.error("Please select a Source");return}}e.field_map.length>0&&p(n)};return r.jsxs("div",{children:[r.jsx(E,{snack:C,setSnackbar:c}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(D,{step:3,active:o})}),r.jsx(O,{zendeskConf:e,setZendeskConf:d,step:o,setStep:p,loading:y,setLoading:m,setSnackbar:c}),r.jsxs("div",{className:"btcd-stp-page",style:x({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(V,{formFields:t,handleInput:n=>B(n,e,d),zendeskConf:e,setZendeskConf:d,loading:y,setLoading:m,setSnackbar:c}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>P(3),disabled:!S(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[Z("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(A,{step:o,saveConfig:()=>w(),isLoading:_,dataConf:e,setDataConf:d,formFields:t})]})}export{le as default};
