var E=Object.defineProperty;var k=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var j=(a,t,s)=>t in a?E(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,N=(a,t)=>{for(var s in t||(t={}))w.call(t,s)&&j(a,s,t[s]);if(k)for(var s of k(t))P.call(t,s)&&j(a,s,t[s]);return a};import{i as C,r as i,j as r}from"./main-577.js";import{e as I,_ as L,d as l}from"./bi.655.81.js";import{S as F}from"./bi.880.909.js";import{e as M}from"./bi.787.676.js";import{I as R}from"./bi.672.677.js";import T from"./bi.180.318.js";import{b as A,c as _}from"./bi.105.885.js";import{D as W}from"./bi.550.886.js";import"./bi.827.680.js";import"./bi.587.674.js";import"./bi.934.737.js";import"./bi.622.681.js";function $({formFields:a,setFlow:t,flow:s,allIntegURL:p}){const u=C(),[f,m]=i.useState(!1),[b,g]=i.useState({}),[o,x]=i.useState(1),[S,c]=i.useState({show:!1}),h=[{label:"First Name",key:"name",required:!0},{label:"Email Address",key:"email",required:!0},{label:"Last Name",key:"last_name",required:!1},{label:"Phone Number",key:"phone_number",required:!1},{label:"Company",key:"company",required:!1},{label:"Website",key:"website",required:!1},{label:"GDPR",key:"gdpr",required:!1},{label:"Event Registration page URL",key:"ref_url",required:!1}],[e,d]=i.useState({name:"Demio",type:"Demio",api_key:"",api_secret:"",field_map:A(h),actionName:"registerPeopletoWabinar",demioFields:h,actions:{}}),D=()=>{m(!0),M(s,t,p,e,u,"","",m).then(n=>{var v;n.success?(l.success((v=n.data)==null?void 0:v.msg),u(p)):l.error(n.data||n)})},q=y=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!_(e)){l.error("Please map mandatory fields");return}if(!e.selectedEvent){l.error("Please select a Event");return}e.field_map.length>0&&x(y)};return r.jsxs("div",{children:[r.jsx(I,{snack:S,setSnackbar:c}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(F,{step:3,active:o})}),r.jsx(T,{demioConf:e,setDemioConf:d,step:o,setStep:x,loading:b,setLoading:g,setSnackbar:c}),r.jsxs("div",{className:"btcd-stp-page",style:N({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(W,{formFields:a,demioConf:e,setDemioConf:d,loading:b,setLoading:g,isLoading:f,setIsLoading:m,setSnackbar:c}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>q(3),disabled:!_(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[L("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(R,{step:o,saveConfig:()=>D(),isLoading:f,dataConf:e,setDataConf:d,formFields:a})]})}export{$ as default};
