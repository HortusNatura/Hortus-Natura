var P=Object.defineProperty;var j=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var k=(c,n,o)=>n in c?P(c,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[n]=o,m=(c,n)=>{for(var o in n||(n={}))q.call(n,o)&&k(c,o,n[o]);if(j)for(var o of j(n))B.call(n,o)&&k(c,o,n[o]);return c};import{u as D,r as p,i as z,j as t}from"./main-577.js";import{c as A,e as G,_ as d,a6 as H,a8 as y,L as O}from"./bi.655.81.js";import{e as J}from"./bi.787.676.js";import{u as w,U as K,C as Q,c as V}from"./bi.337.738.js";import{C as W}from"./bi.827.680.js";import{C as L}from"./bi.515.695.js";import{T as U,t as X}from"./bi.934.737.js";import"./bi.587.674.js";import"./bi.622.681.js";import"./bi.933.682.js";import"./bi.265.683.js";function de({formFields:c,setFlow:n,flow:o,allIntegURL:C}){var _,v;const{formID:f}=D(),[T,h]=p.useState({show:!1}),[N,S]=p.useState([]),F=z(),[b,g]=p.useState(!1),{registration:a}=X,[e,u]=p.useState({name:"User Registration",type:"Registration",user_map:[{}],meta_map:[{}],condition:{action_behavior:"",actions:[{field:"",action:"value"}],logics:[{field:"",logic:"",val:""},"or",{field:"",logic:"",val:""}]}});p.useEffect(()=>{var r,l;const s=m({},e);A({},"role/list",null,"GET").then(i=>{i!=null&&i.success&&i!==void 0&&S(Object.values(i==null?void 0:i.data))}),(l=(r=s==null?void 0:s.user_map)==null?void 0:r[0])!=null&&l.userField||(s.user_map=w.filter(i=>i.required).map(i=>({formField:"",userField:i.key,required:i.required}))),u(s)},[]);const I=()=>{if(!e.action_type){h({show:!0,msg:d("Please select action type","bit-integrations")});return}if(!e.user_role&&e.action_type!=="updated_user"){h({show:!0,msg:d("User Role cann't be empty","bit-integrations")});return}if(!V(e)&&e.action_type!=="updated_user"){h({show:!0,msg:d("Please map mandatory fields","bit-integrations")});return}g(!0),J(o,n,C,e,F,"","",g)},R=(s,r)=>{const l=m({},e);r?l.condition.action_behavior=s:l.condition.action_behavior="",u(l)},x=s=>{const r=m({},e),{name:l,value:i}=s.target;s.target.checked&&(r[l]=i),u(m({},r))},E=`
  <ul>
  <li>The user must be logged in when updating profile</li>
  <li>The user cannot change the value of the username field when updating the user profile.</li>
     
  </ul>`,M=`
  <ul>
  <li>If the Username and Password fields are blank then the user will take the value of the email field as the field and the password will be auto-generated.</li>
     
  </ul>`;return t.jsxs("div",{style:{width:900},children:[t.jsx(G,{snack:T,setSnackbar:h}),(a==null?void 0:a.youTubeLink)&&t.jsx(U,{title:a==null?void 0:a.title,youTubeLink:a==null?void 0:a.youTubeLink}),(a==null?void 0:a.docLink)&&t.jsx(U,{title:a==null?void 0:a.title,docLink:a==null?void 0:a.docLink}),t.jsx("div",{className:"font-w-m mt-3",children:d("Action type","bit-integrations")}),t.jsxs("div",{children:[t.jsx(L,{radio:!0,name:"action_type",onChange:x,checked:(e==null?void 0:e.action_type)==="new_user",value:"new_user",title:d("New User Create","bit-integrations")}),t.jsx(L,{radio:!0,name:"action_type",onChange:x,checked:(e==null?void 0:e.action_type)==="updated_user",value:"updated_user",title:d("Updated User","bit-integrations")})]}),t.jsx("div",{children:t.jsx(K,{formFields:c,formID:f,userConf:e,setUserConf:u,roles:N,userFields:w})}),t.jsxs("div",{children:[t.jsx(Q,{formFields:c,formID:f,userConf:e,setUserConf:u}),t.jsx("br",{})]}),(e==null?void 0:e.condition)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flx",children:t.jsx(H,{onChange:s=>R(s.target.value,s.target.checked),checked:((_=e==null?void 0:e.condition)==null?void 0:_.action_behavior)==="cond",className:"wdt-200 mt-4 mr-2",value:"cond",title:d("Conditional Logics","bit_integration")})}),t.jsx("br",{}),((v=e==null?void 0:e.condition)==null?void 0:v.action_behavior)==="cond"&&t.jsx(W,{formFields:c,dataConf:e,setDataConf:u})]}),(e==null?void 0:e.action_type)==="updated_user"?t.jsx(y,{note:E}):t.jsx(y,{note:M}),t.jsxs("button",{className:"btn f-left btcd-btn-lg green sh-sm flx",type:"button",onClick:()=>I(),disabled:b,children:[d("Save","bit-integrations"),b&&t.jsx(O,{size:20,clr:"#022217",className:"ml-2"})]})]})}export{de as default};
