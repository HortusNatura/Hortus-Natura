var S=Object.defineProperty;var j=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var g=(t,s,a)=>s in t?S(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,p=(t,s)=>{for(var a in s||(s={}))y.call(s,a)&&g(t,a,s[a]);if(j)for(var a of j(s))w.call(s,a)&&g(t,a,s[a]);return t};import{j as e,m as _,L as $}from"./main-577.js";import{_ as d,B as E,a7 as v}from"./bi.655.81.js";import{g as k,a as o}from"./bi.105.885.js";import{S as M}from"./bi.622.681.js";import{M as R}from"./bi.827.680.js";const F=(t,s,a)=>{const l=p({},s);l.field_map.splice(t,0,{}),a(p({},l))},V=(t,s,a)=>{const l=p({},s);l.field_map.length>1&&l.field_map.splice(t,1),a(p({},l))},N=(t,s,a,l)=>{const c=p({},a);c.field_map[s][t.target.name]=t.target.value,t.target.value==="custom"&&(c.field_map[s].customValue=""),l(p({},c))},q=(t,s,a,l,c)=>{const i=p({},a);i.field_map[s][c]=t.target.value,l(p({},i))};function I({field:t,index:s,conf:a,setConf:l,fieldValue:c,fieldLabel:i,className:u}){return e.jsx(R,{onChange:b=>q(b,s,a,l,c),label:d(i,"bit-integrations"),className:u,type:"text",value:t[c],placeholder:d(i,"bit-integrations")})}function O({i:t,formFields:s,field:a,demioConf:l,setDemioConf:c}){var r;const i=(l==null?void 0:l.demioFields)&&l.demioFields.filter(n=>n.required===!0)||[],u=(l==null?void 0:l.demioFields)&&l.demioFields.filter(n=>n.required===!1)||[],b=_(E),{isPro:x}=b;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:n=>N(n,t,l,c),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`))}),e.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((r=M)==null?void 0:r.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),a.formField==="custom"&&e.jsx(I,{field:a,index:t,conf:l,setConf:c,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),e.jsxs("select",{className:"btcd-paper-inp",disabled:t<i.length,name:"demioFormField",value:t<i.length?i[t].key||"":a.demioFormField||"",onChange:n=>N(n,t,l,c),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),t<i.length?e.jsx("option",{value:i[t].key,children:i[t].label},i[t].key):u.map(({key:n,label:m})=>e.jsx("option",{value:n,children:m},n))]})]}),t>=i.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(t,l,c),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>V(t,l,c),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function z({formFields:t,demioConf:s,setDemioConf:a,loading:l,setLoading:c,isLoading:i,setIsLoading:u,setSnackbar:b}){const x=(r,n)=>{n==="selectedEvent"&&r!==""&&o(s,a,r,c),a(m=>{const h=p({},m);return h[n]=r,n==="selectedEvent"&&(delete h.selectedSession,delete h.sessions),h})};return e.jsxs(e.Fragment,{children:[(i||l.event||l.session)&&e.jsx($,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),s.actionName&&!l.event&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:d("Select Event:","bit-integrations")}),e.jsx(v,{options:(s==null?void 0:s.events)&&s.events.map(r=>({label:r.name,value:`${r.id}`})),className:"msl-wrp-options dropdown-custom-width",defaultValue:s==null?void 0:s.selectedEvent,onChange:r=>x(r,"selectedEvent"),singleSelect:!0,closeOnSelect:!0}),e.jsx("button",{onClick:()=>k(s,a,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh Events","bit-integrations")}'`},type:"button",disabled:l.event,children:"↻"})]})]}),s.actionName&&s.selectedEvent&&!l.session&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:d("Select Session:","bit-integrations")}),e.jsx(v,{options:(s==null?void 0:s.sessions)&&s.sessions.map(r=>({label:r.datetime,value:`${r.date_id}`})),className:"msl-wrp-options dropdown-custom-width",defaultValue:s==null?void 0:s.selectedSession,onChange:r=>x(r,"selectedSession"),singleSelect:!0,closeOnSelect:!0}),e.jsx("button",{onClick:()=>o(s,a,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh Sessions","bit-integrations")}'`},type:"button",disabled:l.event,children:"↻"})]})]}),s.actionName&&!i&&e.jsxs("div",{children:[e.jsx("br",{}),e.jsxs("div",{className:"mt-5",children:[e.jsx("b",{className:"wdt-100",children:d("Field Map","bit-integrations")}),e.jsx("button",{className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh Fields","bit-integrations")}'`},type:"button",children:"↻"})]}),e.jsx("br",{}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Demio Fields","bit-integrations")})})]}),s==null?void 0:s.field_map.map((r,n)=>e.jsx(O,{i:n,field:r,demioConf:s,formFields:t,setDemioConf:a,setSnackbar:b},`rp-m-${n+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>F(s.field_map.length,s,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]})]})}export{z as D};
