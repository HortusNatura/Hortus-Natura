var K=Object.defineProperty,A=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var _=(s,t,e)=>t in s?K(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,f=(s,t)=>{for(var e in t||(t={}))w.call(t,e)&&_(s,e,t[e]);if(p)for(var e of p(t))T.call(t,e)&&_(s,e,t[e]);return s},n=(s,t)=>A(s,P(t));var o=(s,t,e)=>new Promise((r,u)=>{var l=i=>{try{a(e.next(i))}catch(m){u(m)}},c=i=>{try{a(e.throw(i))}catch(m){u(m)}},a=i=>i.done?r(i.value):Promise.resolve(i.value).then(l,c);a((e=e.apply(s,t)).next())});import{_ as h,c as y,d}from"./bi.655.81.js";import{e as q,s as b}from"./bi.787.676.js";const k=(s,t,e,r,u)=>{const l=f({},t),c=f({},r);c[s.target.name]="",l[s.target.name]=s.target.value,u(c),e(l)},I=(s,t,e,r,u)=>{if(!s.authKey){t({authKey:s.authKey?"":h("API key can't be empty")});return}t({}),u(n(f({},r),{auth:!0}));const l={authKey:s.authKey};y(l,"mailercloud_handle_authorize").then(c=>{if(!c.data.errors){e(!0),u(n(f({},r),{auth:!1})),d.success(h("Authorized successfully"));return}u(n(f({},r),{auth:!1})),d.error(h("Authorized failed"))})},x=(s,t,e,r)=>o(void 0,null,function*(){r&&r(n(f({},e),{list:!0}));const u={authKey:s.authKey},l=yield y(u,"mailercloud_get_all_lists");if(l.success){const{data:c}=l.data,a=f({},s);return c&&(a.default||(a.default={}),a.default.lists=c,t(a),r&&(r(n(f({},e),{list:!1})),d.success(h("Tag refresh successfully")))),!0}return r&&(r(n(f({},e),{list:!1})),d.success(h("Tag refresh failed"))),!1}),M=(s,t,e,r)=>o(void 0,null,function*(){r&&r(n(f({},e),{field:!0}));const u={authKey:s.authKey},l=yield y(u,"mailercloud_get_all_fields");if(l.success){const{data:c}=l,a=f({},s);return c&&(a.default||(a.default={}),a.default.fields=c,t(a),r&&(r(n(f({},e),{field:!1})),d.success(h("Tag refresh successfully")))),!0}return r&&(r(n(f({},e),{field:!1})),d.success(h("Tag refresh failed"))),!1}),B=s=>{var e;const t=(e=s==null?void 0:s.default)==null?void 0:e.fields.filter(r=>r.required===!0);return t.length>0?t.map(r=>({formField:"",mailercloudFormField:r.key})):[{formField:"",mailercloudFormField:""}]},F=s=>!((s!=null&&s.field_map?s.field_map.filter(e=>!e.formField||!e.mailercloudFormField||!e.formField==="custom"&&!e.customValue):[]).length>0),E=(s,t,e)=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!F(s)){d.error("Please map mandatory fields");return}s.field_map.length>0&&t(e)},V=(s,t,e,r,u,l)=>{l(!0),q(s,t,e,r,u,"","",l).then(a=>{var i;a.success?(d.success((i=a.data)==null?void 0:i.msg),u(e)):d.error(a.data||a)})},j=(s,t,e,r,u,l)=>{if(!F(e)){d.error("Please map mandatory fields");return}b({flow:s,allIntegURL:t,conf:e,navigate:r,edit:u,setIsLoading:l})};export{x as a,M as b,I as c,V as d,B as g,k as h,E as n,j as s};
