var L=Object.defineProperty;var v=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var A=(i,s,a)=>s in i?L(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,N=(i,s)=>{for(var a in s||(s={}))T.call(s,a)&&A(i,a,s[a]);if(v)for(var a of v(s))_.call(s,a)&&A(i,a,s[a]);return i};import{r as m,j as e,i as z,u as B,m as D}from"./main-577.js";import{_ as d,L as F,c as P,E as q,B as E,e as M}from"./bi.655.81.js";import{S as R}from"./bi.880.909.js";import{s as H}from"./bi.787.676.js";import{I as O}from"./bi.672.677.js";import{A as $,h as G,c as J}from"./bi.620.783.js";import{B as K}from"./bi.232.720.js";import{T as S,t as Q}from"./bi.934.737.js";import"./bi.827.680.js";import"./bi.587.674.js";import"./bi.622.681.js";import"./bi.933.682.js";import"./bi.265.683.js";function U({formID:i,affiliateConf:s,setAffiliateConf:a,step:u,setStep:k,isLoading:b,setIsLoading:p,setSnackbar:y}){const[n,f]=m.useState(!1),[c,h]=m.useState(!1),{affiliate:t}=Q,l=()=>{p("auth"),P({},"affiliate_authorize").then(r=>{r!=null&&r.success&&(f(!0),y({show:!0,msg:d("Connected with Affiliate Successfully","bit-integrations")})),p(!1),h(!0)})},j=r=>{const g=q(s);g[r.target.name]=r.target.value,a(g)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:u===1&&900,height:u===1&&"auto"},children:[(t==null?void 0:t.youTubeLink)&&e.jsx(S,{title:t==null?void 0:t.title,youTubeLink:t==null?void 0:t.youTubeLink}),(t==null?void 0:t.docLink)&&e.jsx(S,{title:t==null?void 0:t.title,docLink:t==null?void 0:t.docLink}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:d("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:j,name:"name",value:s.name,type:"text",placeholder:d("Integration Name...","bit-integrations")}),b==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(F,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),c&&!n&&!b&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Affiliate plugin must be activated to integrate with Bit Integrations."]}),!n&&e.jsx("button",{onClick:l,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:d("Connect","bit-integrations")}),n&&e.jsxs("button",{onClick:()=>k(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!n,children:[d("Next","bit-integrations"),e.jsx(K,{className:"ml-1 rev-icn"})]})]})}function ce({formFields:i,setFlow:s,flow:a,allIntegURL:u,isInfo:k,edit:b}){const p=z(),{formID:y}=B();D(E);const[n,f]=m.useState(!1),[c,h]=m.useState(1),[t,l]=m.useState({show:!1}),j=[{key:"1",label:"Create a referral for specific affiliate Id"},{key:"2",label:"Create a referral for the user"}],r=[{key:"1",label:"Paid"},{key:"2",label:"Unpaid"},{key:"3",label:"Pending"},{key:"4",label:"Reject"}],g=[{key:"1",label:"Sale"},{key:"2",label:"Opt-in"},{key:"3",label:"Lead"}],C=[{key:"amount",label:"Amount",required:!0},{key:"description",label:"Description",required:!0},{key:"reference",label:"Reference",required:!1},{key:"context",label:"Context",required:!1}],[o,x]=m.useState({name:"Affiliate",type:"Affiliate",mainAction:"",affiliate_id:"",referralId:"",statusId:"",field_map:[{formField:"",affiliateFormField:""}],allReferralType:g,allStatus:r,allActions:j,createAffiliateFields:C,actions:{}}),I=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!J(o)){l({show:!0,msg:"Please map fields to continue."});return}o.mainAction!==""&&h(3)};return e.jsxs("div",{children:[e.jsx(M,{snack:t,setSnackbar:l}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(R,{step:3,active:c})}),e.jsx(U,{formID:y,affiliateConf:o,setAffiliateConf:x,step:c,setStep:h,isLoading:n,setIsLoading:f,setSnackbar:l}),e.jsxs("div",{className:"btcd-stp-page",style:N({},c===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx($,{formFields:i,handleInput:w=>G(w,o,x),affiliateConf:o,setAffiliateConf:x,isLoading:n,setIsLoading:f,setSnackbar:l,allIntegURL:u,isInfo:k,edit:b}),e.jsxs("button",{onClick:()=>I(),disabled:!o.statusId||!o.referralId||n,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[d("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(O,{step:c,saveConfig:()=>H({flow:a,setFlow:s,allIntegURL:u,navigate:p,conf:o,setIsLoading:f,setSnackbar:l}),isLoading:n,dataConf:o,setDataConf:x,formFields:i})]})}export{ce as default};
