var R=Object.defineProperty;var L=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var v=(r,s,o)=>s in r?R(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o,N=(r,s)=>{for(var o in s||(s={}))T.call(s,o)&&v(r,o,s[o]);if(L)for(var o of L(s))z.call(s,o)&&v(r,o,s[o]);return r};import{r as m,j as t,i as _,u as B,m as D}from"./main-577.js";import{_ as c,L as E,c as F,E as G,B as P,e as q}from"./bi.655.81.js";import{S as U}from"./bi.880.909.js";import{s as H}from"./bi.787.676.js";import{I as O}from"./bi.672.677.js";import{L as $,h as J,c as K}from"./bi.306.780.js";import{B as Q}from"./bi.232.720.js";import{T as S,t as V}from"./bi.934.737.js";import"./bi.827.680.js";import"./bi.587.674.js";import"./bi.337.94.js";import"./bi.622.681.js";import"./bi.832.724.js";/* empty css          */import"./bi.49.675.js";import"./bi.933.682.js";import"./bi.265.683.js";function W({formID:r,learnDashConf:s,setLearnDashConf:o,step:u,setStep:k,isLoading:p,setIsLoading:h,setSnackbar:x}){const[n,y]=m.useState(!1),[l,d]=m.useState(!1),{learnDash:e}=V,b=()=>{h("auth"),F({},"learnDash_authorize").then(a=>{a!=null&&a.success&&(y(!0),x({show:!0,msg:c("Connected with LearnDash Successfully","bit-integrations")})),h(!1),d(!0)})},j=a=>{const g=G(s);g[a.target.name]=a.target.value,o(g)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:u===1&&900,height:u===1&&"auto"},children:[(e==null?void 0:e.youTubeLink)&&t.jsx(S,{title:e==null?void 0:e.title,youTubeLink:e==null?void 0:e.youTubeLink}),(e==null?void 0:e.docLink)&&t.jsx(S,{title:e==null?void 0:e.title,docLink:e==null?void 0:e.docLink}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:c("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:j,name:"name",value:s.name,type:"text",placeholder:c("Integration Name...","bit-integrations")}),p==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(E,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),l&&!n&&!p&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"LearnDash plugin must be activated to integrate with Bit Integrations."]}),!n&&t.jsx("button",{onClick:b,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:c("Connect","bit-integrations")}),n&&t.jsxs("button",{onClick:()=>k(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!n,children:[c("Next","bit-integrations"),t.jsx(Q,{className:"ml-1 rev-icn"})]})]})}function be({formFields:r,setFlow:s,flow:o,allIntegURL:u,isInfo:k,edit:p}){const h=_(),{formID:x}=B(),n=D(P),{siteURL:y}=n,[l,d]=m.useState(!1),[e,b]=m.useState(1),[j,a]=m.useState({show:!1}),g=[{key:"1",label:"Create Group"},{key:"2",label:"Add the user to a group pro"},{key:"3",label:"Enroll the user in a course"},{key:"4",label:"Make the user the leader of group"},{key:"5",label:"Mark a course complete for the user"},{key:"6",label:"Mark a lesson complete for the user"},{key:"7",label:"Mark a lesson not complete for the user pro"},{key:"8",label:"Mark a topic complete for the user"},{key:"9",label:"Mark a topic not complete for the user pro"},{key:"10",label:"Remove the Leader from a group and its children pro"},{key:"11",label:"Remove the user from a group pro"},{key:"12",label:"Remove the user from a group and its children pro"},{key:"13",label:"Reset the users attempts for a quiz pro "},{key:"14",label:"Reset the users progress in a course pro"},{key:"16",label:"Send an email to the users group leaders"},{key:"17",label:"Unenroll the user from a course pro"}],w=[{key:"1",label:"Do not add group leader role"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],A=[{key:"1",label:"Do nothing"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],C=[{key:"title",label:"Title",required:!0}],[i,f]=m.useState({name:"LearnDash",type:"LearnDash",mainAction:"",courseId:"",domainName:y,field_map:[{formField:"",learnDeshFormField:""}],allActions:g,groupUserRole:w,groupOfLeader4:A,createGroupFields:C,actions:{}}),I=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),i.mainAction==="1"&&!K(i)){a({show:!0,msg:"Please map fields to continue."});return}i.mainAction!==""&&b(3)};return t.jsxs("div",{children:[t.jsx(q,{snack:j,setSnackbar:a}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(U,{step:3,active:e})}),t.jsx(W,{formID:x,learnDashConf:i,setLearnDashConf:f,step:e,setStep:b,isLoading:l,setIsLoading:d,setSnackbar:a}),t.jsxs("div",{className:"btcd-stp-page",style:N({},e===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx($,{formFields:r,handleInput:M=>J(M,i,f),learnDashConf:i,setLearnDashConf:f,isLoading:l,setIsLoading:d,setSnackbar:a,allIntegURL:u,isInfo:k,edit:p}),i.mainAction!=="16"&&t.jsxs("button",{onClick:()=>I(),disabled:!i.mainAction||l,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[c("Next","bit-integrations")," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),i.mainAction!=="16"&&t.jsx(O,{step:e,saveConfig:()=>H({flow:o,setFlow:s,allIntegURL:u,navigate:h,conf:i,setIsLoading:d,setSnackbar:a}),isLoading:l,dataConf:i,setDataConf:f,formFields:r})]})}export{be as default};
