var F=Object.defineProperty;var h=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var S=(t,e,s)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,_=(t,e)=>{for(var s in e||(e={}))G.call(e,s)&&S(t,s,e[s]);if(h)for(var s of h(e))L.call(e,s)&&S(t,s,e[s]);return t};import{i as w,r,j as a}from"./main-577.js";import{e as E,_ as I,d as c}from"./bi.655.81.js";import{S as P}from"./bi.880.909.js";import{e as A}from"./bi.787.676.js";import{I as T}from"./bi.672.677.js";import M from"./bi.909.284.js";import{c as x}from"./bi.226.820.js";import{S as z}from"./bi.13.821.js";import"./bi.827.680.js";import"./bi.587.674.js";import"./bi.934.737.js";import"./bi.622.681.js";import"./bi.933.682.js";import"./bi.265.683.js";function ee({formFields:t,setFlow:e,flow:s,allIntegURL:m}){const u=w(),[q,f]=r.useState(!1),[p,b]=r.useState({auth:!1,customFields:!1,lists:!1}),[l,g]=r.useState(1),[v,o]=r.useState({show:!1}),j=[{key:"email",label:"Email",required:!0},{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!1},{key:"alternate_emails",label:"Alternate Emails",required:!1},{key:"address_line_1",label:"Address Line 1",required:!1},{key:"address_line_2",label:"Address Line 2",required:!1},{key:"city",label:"City",required:!1},{key:"state_province_region",label:"State Province Region",required:!1},{key:"postal_code",label:"Postal Code",required:!1},{key:"country",label:"Country",required:!1},{key:"phone_number",label:"Phone Number",required:!1},{key:"whatsapp",label:"Whatsapp",required:!1},{key:"line",label:"Line",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"unique_name",label:"Unique Name",required:!1}],[i,d]=r.useState({name:"SendGrid",type:"SendGrid",apiKey:"",field_map:[{formField:"",sendGridFormField:""}],staticFields:j,lists:[],customFields:[],selectedLists:"",groups:[],actions:{}}),C=()=>{f(!0),A(s,e,m,i,u,"","",f).then(n=>{var k;n.success?(c.success((k=n.data)==null?void 0:k.msg),u(m)):c.error(n.data||n)})},N=y=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!x(i)){c.error("Please map mandatory fields");return}i.field_map.length>0&&g(y)};return a.jsxs("div",{children:[a.jsx(E,{snack:v,setSnackbar:o}),a.jsx("div",{className:"txt-center mt-2",children:a.jsx(P,{step:3,active:l})}),a.jsx(M,{sendGridConf:i,setSendGridConf:d,step:l,setStep:g,loading:p,setLoading:b,setSnackbar:o}),a.jsxs("div",{className:"btcd-stp-page",style:_({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[a.jsx(z,{formFields:t,sendGridConf:i,setSendGridConf:d,loading:p,setLoading:b,setSnackbar:o}),a.jsxs("button",{onClick:()=>N(3),disabled:!x(i),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[I("Next","bit-integrations")," ","Â ",a.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),a.jsx(T,{step:l,saveConfig:()=>C(),isLoading:q,dataConf:i,setDataConf:d,formFields:t})]})}export{ee as default};
