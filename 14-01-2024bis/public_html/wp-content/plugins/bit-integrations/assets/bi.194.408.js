var _=Object.defineProperty;var v=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var j=(a,s,t)=>s in a?_(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,k=(a,s)=>{for(var t in s||(s={}))F.call(s,t)&&j(a,t,s[t]);if(v)for(var t of v(s))q.call(s,t)&&j(a,t,s[t]);return a};import{i as w,r,j as i}from"./main-577.js";import{e as T,_ as E,d as m}from"./bi.655.81.js";import{S as L}from"./bi.880.909.js";import{e as z}from"./bi.787.676.js";import{I as A}from"./bi.672.677.js";import B from"./bi.481.279.js";import{h as C,c as P}from"./bi.106.810.js";import{M as D}from"./bi.828.811.js";import"./bi.827.680.js";import"./bi.587.674.js";import"./bi.934.737.js";import"./bi.622.681.js";import"./bi.933.682.js";import"./bi.265.683.js";function se({formFields:a,setFlow:s,flow:t,allIntegURL:p}){const u=w(),[y,f]=r.useState(!1),[b,g]=r.useState({auth:!1,customFields:!1}),[o,h]=r.useState(1),[S,c]=r.useState({show:!1}),N=[{key:"email",label:"Email",required:!0},{key:"firstName",label:"First Name",required:!1},{key:"lastName",label:"Last Name",required:!1},{key:"timezone",label:"Timezone",required:!1},{key:"ipAddress",label:"Ip Address",required:!1}],[e,n]=r.useState({name:"MailBluster",type:"MailBluster",auth_token:"",field_map:[{formField:"",mailBlusterFormField:""}],staticFields:N,subscribed:"",customFields:[],selectedTags:[],actions:{}}),M=()=>{f(!0),z(t,s,p,e,u,"","",f).then(d=>{var x;d.success?(m.success((x=d.data)==null?void 0:x.msg),u(p)):m.error(d.data||d)})},I=l=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!P(e)){m.error("Please map mandatory fields");return}e.field_map.length>0&&h(l)};return i.jsxs("div",{children:[i.jsx(T,{snack:S,setSnackbar:c}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(L,{step:3,active:o})}),i.jsx(B,{mailBlusterConf:e,setMailBlusterConf:n,step:o,setStep:h,loading:b,setLoading:g,setSnackbar:c}),i.jsxs("div",{className:"btcd-stp-page",style:k({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(D,{formFields:a,handleInput:l=>C(l,e,n),mailBlusterConf:e,setMailBlusterConf:n,loading:b,setLoading:g,setSnackbar:c}),(e==null?void 0:e.subscribed)&&i.jsxs("button",{onClick:()=>I(3),disabled:!(e!=null&&e.subscribed),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[E("Next","bit-integrations")," ","Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.subscribed)&&i.jsx(A,{step:o,saveConfig:()=>M(),isLoading:y,dataConf:e,setDataConf:n,formFields:a})]})}export{se as default};
