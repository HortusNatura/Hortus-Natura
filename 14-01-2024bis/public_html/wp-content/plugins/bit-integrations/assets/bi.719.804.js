var y=Object.defineProperty;var n=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var v=(e,t,s)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,u=(e,t)=>{for(var s in t||(t={}))k.call(t,s)&&v(e,s,t[s]);if(n)for(var s of n(t))_.call(t,s)&&v(e,s,t[s]);return e};import{m as I,j as l,L}from"./main-577.js";import{B as S,_ as r,L as w}from"./bi.655.81.js";import{h as F,a as g,d as M}from"./bi.454.794.js";import{g as $,a as N}from"./bi.342.803.js";import{S as q}from"./bi.622.681.js";import{T as R}from"./bi.933.682.js";import{h as V}from"./bi.787.676.js";function T({i:e,field:t,formFields:s,moosendConf:i,setMoosendConf:d}){var p;const b=I(S),{isPro:h}=b,m=(i==null?void 0:i.moosendFields.filter(a=>a.required===!0))||[],c=(i==null?void 0:i.moosendFields.filter(a=>a.required===!1))||[];return l.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:l.jsxs("div",{className:"pos-rel flx",children:[l.jsxs("div",{className:"flx integ-fld-wrp",children:[l.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formFields",onChange:a=>{F(a,e,i,d)},value:t.formFields||"",children:[l.jsx("option",{value:"",children:r("Select Field")}),l.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(a=>l.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`))}),l.jsx("option",{value:"custom",children:r("Custom...")}),l.jsx("optgroup",{label:`General Smart Codes ${h?"":"(PRO)"}`,children:h&&((p=q)==null?void 0:p.map(a=>l.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`)))})]}),t.formField==="custom"&&l.jsx(R,{onChange:a=>V(a,e,i,d),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:t.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:s}),l.jsxs("select",{className:"btcd-paper-inp",disabled:e<m.length,name:"moosendFormFields",onChange:a=>{F(a,e,i,d)},value:e<m.length?m[e].key||"":t.moosendFormFields||"",children:[l.jsx("option",{value:"",children:r("Select Field")}),e<m.length?l.jsx("option",{value:m[e].key,children:m[e].label},m[e].key):c.map(({key:a,label:x})=>l.jsx("option",{value:a,children:x},a))]})]}),(i==null?void 0:i.method)==="1"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>g(e,i,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),l.jsx("button",{onClick:()=>M(e,i,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:l.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function O({moosendConf:e,setMoosendConf:t,formFields:s,loading:i,setLoading:d}){var m;const b=[{key:"1",name:"Subscribe"},{key:"0",name:"Unsubscribe"},{key:"2",name:"Unsubscribe from list"}],h=c=>{let p;const a=u({},e),{name:x,value:j}=c.target;switch(j!==""?a[x]=j:delete a[x],x){case"listId":a.field_map=[{formFields:"",moosendFormFields:""}],p=N(a),a.field_map=p;break;case"method":a.listId="",a.field_map=[{formFields:"",moosendFormFields:""}],p=N(a),a.field_map=p;break}t(u({},a))};return l.jsxs("div",{className:"mt-2",children:[!i.page&&l.jsxs("div",{className:"flx mt-2",children:[l.jsx("b",{className:"wdt-200 d-in-b ",children:r("Method:")}),l.jsxs("select",{onChange:h,name:"method",value:e==null?void 0:e.method,className:"btcd-paper-inp w-5 mx-0",children:[l.jsx("option",{value:"",children:r("Select Method")}),b.map(c=>l.jsx("option",{value:c.key,children:c.name},c.key))]})]}),e.method&&e.method!=="0"&&l.jsxs("div",{className:"flx mt-2",children:[l.jsx("b",{className:"wdt-200 d-in-b ",children:r("List:")}),l.jsxs("select",{onChange:h,name:"listId",value:e==null?void 0:e.listId,className:"btcd-paper-inp w-5 mx-0",children:[l.jsx("option",{value:"",children:r("Select List")}),((m=e==null?void 0:e.default)==null?void 0:m.lists)&&e.default.lists.map(c=>l.jsx("option",{value:c.ID,children:c.Name},c.ID))]}),l.jsx("button",{onClick:()=>$(e,t,i,d),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh list"'},type:"button",disabled:i.list,children:"â†»"}),i.list&&l.jsx(w,{size:"20",clr:"#022217",className:"ml-2"})]}),(e==null?void 0:e.method)&&l.jsxs("div",{className:"mt-5",children:[l.jsx("b",{className:"wdt-100",children:r("Field Map")}),l.jsx("div",{className:"btcd-hr mt-2 mb-4"}),l.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:r("Form Fields")})}),l.jsx("div",{className:"txt-dp",children:l.jsx("b",{children:r("Moosend Fields")})})]}),e==null?void 0:e.field_map.map((c,p)=>l.jsx(T,{i:p,field:c,formFields:s,moosendConf:e,setMoosendConf:t},`ko-m-${p+8}`)),(e==null?void 0:e.method)==="1"&&l.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:l.jsx("button",{onClick:()=>g(e.field_map.length,e,t),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),i.page&&l.jsx(L,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}})]})}export{O as M};
