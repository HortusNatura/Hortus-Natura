var N=Object.defineProperty;var h=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var j=(t,l,i)=>l in t?N(t,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[l]=i,o=(t,l)=>{for(var i in l||(l={}))v.call(l,i)&&j(t,i,l[i]);if(h)for(var i of h(l))_.call(l,i)&&j(t,i,l[i]);return t};import{j as e,m as w,L as $}from"./main-577.js";import{_ as d,B as M,a7 as k}from"./bi.655.81.js";import{g as R}from"./bi.447.906.js";import{S as T}from"./bi.622.681.js";import{M as S}from"./bi.827.680.js";const F=(t,l,i)=>{const a=o({},l);a.field_map.splice(t,0,{}),i(o({},a))},q=(t,l,i)=>{const a=o({},l);a.field_map.length>1&&a.field_map.splice(t,1),i(o({},a))},g=(t,l,i,a)=>{const r=o({},i);r.field_map[l][t.target.name]=t.target.value,t.target.value==="custom"&&(r.field_map[l].customValue=""),a(o({},r))},V=(t,l,i,a,r)=>{const s=o({},i);s.field_map[l][r]=t.target.value,a(o({},s))};function L({field:t,index:l,conf:i,setConf:a,fieldValue:r,fieldLabel:s,className:m}){return e.jsx(S,{onChange:p=>V(p,l,i,a,r),label:d(s,"bit-integrations"),className:m,type:"text",value:t[r],placeholder:d(s,"bit-integrations")})}function P({i:t,formFields:l,field:i,systemIOConf:a,setSystemIOConf:r}){var c;const s=(a==null?void 0:a.systemIOFields)&&a.systemIOFields.filter(n=>n.required===!0)||[],m=(a==null?void 0:a.systemIOFields)&&a.systemIOFields.filter(n=>n.required===!1)||[],p=w(M),{isPro:b}=p;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:i.formField||"",onChange:n=>g(n,t,a,r),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:l==null?void 0:l.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`))}),e.jsx("option",{value:"custom",children:d("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${b?"":"(PRO)"}`,children:b&&((c=T)==null?void 0:c.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),i.formField==="custom"&&e.jsx(L,{field:i,index:t,conf:a,setConf:r,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),e.jsxs("select",{className:"btcd-paper-inp",disabled:t<s.length,name:"systemIOFormField",value:t<s.length?s[t].key||"":i.systemIOFormField||"",onChange:n=>g(n,t,a,r),children:[e.jsx("option",{value:"",children:d("Select Field","bit-integrations")}),t<s.length?e.jsx("option",{value:s[t].key,children:s[t].label},s[t].key):m.map(({key:n,label:x})=>e.jsx("option",{value:n,children:x},n))]})]}),t>=s.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(t,a,r),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>q(t,a,r),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function H({formFields:t,systemIOConf:l,setSystemIOConf:i,loading:a,setLoading:r,isLoading:s,setIsLoading:m,setSnackbar:p}){const b=(c,n)=>{i(x=>{const u=o({},x);return u[n]=c,u})};return e.jsxs(e.Fragment,{children:[(s||a.tag||a.session)&&e.jsx($,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),l.actionName&&!a.tag&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:d("Select Tag:","bit-integrations")}),e.jsx(k,{options:(l==null?void 0:l.tags)&&l.tags.map(c=>({label:c.name,value:`${c.id}`})),className:"msl-wrp-options dropdown-custom-width",defaultValue:l==null?void 0:l.selectedTag,onChange:c=>b(c,"selectedTag"),singleSelect:!0,closeOnSelect:!0}),e.jsx("button",{onClick:()=>R(l,i,r),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh Tags","bit-integrations")}'`},type:"button",disabled:a.tag,children:"↻"})]})]}),l.actionName&&!s&&e.jsxs("div",{children:[e.jsx("br",{}),e.jsxs("div",{className:"mt-5",children:[e.jsx("b",{className:"wdt-100",children:d("Field Map","bit-integrations")}),e.jsx("button",{className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${d("Refresh Fields","bit-integrations")}'`},type:"button",children:"↻"})]}),e.jsx("br",{}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:d("SystemIO Fields","bit-integrations")})})]}),l==null?void 0:l.field_map.map((c,n)=>e.jsx(P,{i:n,field:c,systemIOConf:l,formFields:t,setSystemIOConf:i,setSnackbar:p},`rp-m-${n+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>F(l.field_map.length,l,i),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{})]})]})}export{H as S};
