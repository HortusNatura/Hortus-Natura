var K=Object.defineProperty;var P=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var E=(r,t,s)=>t in r?K(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,j=(r,t)=>{for(var s in t||(t={}))D.call(t,s)&&E(r,s,t[s]);if(P)for(var s of P(t))B.call(t,s)&&E(r,s,t[s]);return r};import{r as u,j as e,i as V,u as _}from"./main-577.js";import{_ as a,a7 as S,E as L,e as I}from"./bi.655.81.js";import{S as M}from"./bi.880.909.js";import{s as U}from"./bi.787.676.js";import{I as R}from"./bi.672.677.js";import{T as H,t as W}from"./bi.934.737.js";import{T as $,a as w,P as T}from"./bi.403.694.js";import{P as q,R as G,B as O}from"./bi.363.721.js";import"./bi.827.680.js";import"./bi.587.674.js";function z({formID:r,customApiConf:t,setCustomApiConf:s,step:d,setStep:h,isLoading:m,setIsLoading:y,setSnackbar:N,redirectLocation:o,isInfo:l}){u.useState(!1);const{customApi:n}=W,p=[{label:"API Key",value:"apikey"},{label:"Bearer Token",value:"bearer"},{label:"Basic Auth",value:"basic"}],x=[{label:"Header",value:"header"},{label:"Query String",value:"query"}],i=c=>{const v=j({},t);v[c.target.name]=c.target.value,s(v)},b=(c,v)=>{const k=L(t);c?k[v]=c:delete k[v],s(j({},k))};function g(c){switch(c){case"apikey":return!t.key||!t.value||!t.apiKeyAddTo;case"bearer":return!t.key||!t.token;case"basic":return!t.username||!t.password;default:return!0}}return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"1000px"},children:[(n==null?void 0:n.youTubeLink)&&e.jsx(H,{title:n==null?void 0:n.title,youTubeLink:n==null?void 0:n.youTubeLink}),(n==null?void 0:n.docLink)&&e.jsx(H,{title:n==null?void 0:n.title,docLink:n==null?void 0:n.docLink}),e.jsxs("div",{className:"d-flx",children:[e.jsx("div",{className:"wdt-200 d-in-b mt-3",children:e.jsx("b",{children:a("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:i,name:"name",value:t.name,type:"text",placeholder:a("Integration Name...","bit-integrations"),disabled:l})]}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Select Auth Protocol: ","bit-integrations")}),e.jsx(S,{defaultValue:t.authType,className:"btcd-paper-drpdwn w-5",singleSelect:!0,options:p,onChange:c=>b(c,"authType")})]}),t.authType==="apikey"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"key",value:t.key,type:"text",placeholder:a("key","bit-integrations"),disabled:l})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Value:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"value",value:t.value,type:"text",placeholder:a("value","bit-integrations"),disabled:l})]}),e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Add to: ","bit-integrations")}),e.jsx(S,{defaultValue:t.apiKeyAddTo,className:"btcd-paper-drpdwn w-5 mt-2",singleSelect:!0,options:x,onChange:c=>b(c,"apiKeyAddTo")})]}),t.authType==="bearer"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"key",value:t.key,type:"text",placeholder:a("key","bit-integrations"),disabled:l})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Token:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"token",value:t.token,type:"text",placeholder:a("Token","bit-integrations"),disabled:l})]})]}),t.authType==="basic"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("Key:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-2",onChange:i,name:"key",value:t.key,type:"text",placeholder:a("key","bit-integrations"),disabled:l})]}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("User Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:i,name:"username",value:t.username,type:"text",placeholder:a("User Name...","bit-integrations"),disabled:l}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:a("password:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:i,name:"password",value:t.password,type:"text",placeholder:a("password...","bit-integrations"),disabled:l})]}),e.jsx("br",{}),e.jsx("div",{style:j({},d===1&&{width:900,height:"auto",overflow:"visible"}),children:e.jsxs("button",{onClick:()=>h(2),disabled:g(t.authType)||m,className:"btn btcd-btn-lg green sh-sm ",type:"button",children:[a("Next","bit-integrations"),e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})})]})}const F=({formID:r,formFields:t,customApiConf:s,setCustomApiConf:d,isInfo:h,create:m,step:y,setStep:N})=>{const[o,l]=u.useState(1),n=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"},{value:"PATCH",label:"PATCH"}],p=(i,b)=>{const g=L(s);i?g[b]=i:delete g[b],d(j({},g))},x=i=>{const b=L(s);b[i.target.name]=i.target.value,d(b)};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{className:"wdt-200 d-in-b mt-3",children:a("Select Method: ","bit-integrations")}),e.jsx(S,{defaultValue:s.actionMethod,className:"btcd-paper-drpdwn w-5",singleSelect:!0,options:n,onChange:i=>p(i,"actionMethod")})]}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("div",{className:"wdt-200 d-in-b mt-3",children:e.jsx("b",{children:a("Api endpoint:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:x,name:"url",value:s.apiEndpoint,type:"text",placeholder:a("api endpoint","bit-integrations")})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs($,{children:[e.jsxs("div",{className:"flx mt-2",children:[e.jsx(w,{children:e.jsx("button",{className:`btcd-s-tab-link ${o===1&&"s-t-l-active"}`,type:"button",children:a("Params","bit-integrations")})}),e.jsx(w,{children:e.jsx("button",{className:`btcd-s-tab-link ${o===2&&"s-t-l-active"}`,type:"button",children:a("Headers","bit-integrations")})}),e.jsx(w,{children:e.jsx("button",{className:`btcd-s-tab-link ${o===3&&"s-t-l-active"}`,type:"button",children:a("Body","bit-integrations")})})]}),e.jsx("div",{className:"btcd-hr"}),e.jsx(T,{children:e.jsx(q,{webHooks:s,setWebHooks:d,formFields:t,isInfo:h,setTab:l})}),e.jsx(T,{children:e.jsx(G,{webHooks:s,setWebHooks:d,formFields:t,isInfo:h,setTab:l})}),e.jsx(T,{children:e.jsx(O,{webHooks:s,setWebHooks:d,formFields:t,isInfo:h,setTab:l})})]})]})};function se({formFields:r,setFlow:t,flow:s,allIntegURL:d}){const h=V(),{formID:m}=_(),[y,N]=u.useState(!1),[o,l]=u.useState(1),[n,p]=u.useState({show:!1}),[x,i]=u.useState({name:"CustomApi",type:"CustomApi",url:"",field_map:[{formField:"",customApiFormField:""}],actions:{}}),b=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),l(3)};return e.jsxs("div",{children:[e.jsx(I,{snack:n,setSnackbar:p}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(M,{step:3,active:o})}),e.jsx(z,{formID:m,customApiConf:x,setCustomApiConf:i,step:o,setStep:l,isLoading:y,setIsLoading:N,setSnackbar:p}),e.jsxs("div",{className:"btcd-stp-page",style:j({},o===2&&{width:900,height:"1000px",overflow:"visible"}),children:[e.jsx(F,{formID:m,formFields:r,customApiConf:x,setCustomApiConf:i,create:!0,step:!0,setStep:!0}),e.jsxs("button",{onClick:()=>b(),className:"btn btcd-btn-lg green sh-sm flx",type:"button",children:[a("Next","bit-integrations"),"Â ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(R,{step:o,saveConfig:()=>U({flow:s,setFlow:t,allIntegURL:d,navigate:h,conf:x,setIsLoading:N,setSnackbar:p}),isLoading:y,dataConf:x,setDataConf:i,formFields:r})]})}export{se as default};
