var I=Object.defineProperty;var k=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var v=(n,s,i)=>s in n?I(n,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[s]=i,y=(n,s)=>{for(var i in s||(s={}))A.call(s,i)&&v(n,i,s[i]);if(k)for(var i of k(s))L.call(s,i)&&v(n,i,s[i]);return n};import{r as d,j as t,i as T,u as _}from"./main-577.js";import{_ as l,L as z,c as F,E as B,e as E}from"./bi.655.81.js";import{S as M}from"./bi.880.909.js";import{s as q}from"./bi.787.676.js";import{I as D}from"./bi.672.677.js";import{S as P,h as H,c as R}from"./bi.812.684.js";import{B as G}from"./bi.232.720.js";import{T as N,t as J}from"./bi.934.737.js";import"./bi.827.680.js";import"./bi.587.674.js";import"./bi.622.681.js";import"./bi.933.682.js";import"./bi.265.683.js";function K({formID:n,sliceWpConf:s,setSliceWpConf:i,step:u,setStep:x,isLoading:h,setIsLoading:p,setSnackbar:S}){const[o,f]=d.useState(!1),[m,b]=d.useState(!1),{sliceWp:e}=J,c=()=>{p("auth"),F({},"slicewp_authorize").then(r=>{r!=null&&r.success&&(f(!0),S({show:!0,msg:l("Connected with SliceWp affiliate Successfully","bit-integrations")})),p(!1),b(!0)})},j=r=>{const a=B(s);a[r.target.name]=r.target.value,i(a)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:u===1&&900,height:u===1&&"auto"},children:[(e==null?void 0:e.youTubeLink)&&t.jsx(N,{title:e==null?void 0:e.title,youTubeLink:e==null?void 0:e.youTubeLink}),(e==null?void 0:e.docLink)&&t.jsx(N,{title:e==null?void 0:e.title,docLink:e==null?void 0:e.docLink}),t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:l("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:j,name:"name",value:s.name,type:"text",placeholder:l("Integration Name...","bit-integrations")}),h==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(z,{size:25,clr:"#022217",className:"mr-2"}),"Checking if SliceWp affiliate is active!!!"]}),m&&!o&&!h&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"SliceWp affiliate plugin must be activated to integrate with Bit Integrations."]}),!o&&t.jsx("button",{onClick:c,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:l("Connect","bit-integrations")}),o&&t.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!o,children:[l("Next","bit-integrations"),t.jsx(G,{className:"ml-1 rev-icn"})]})]})}function nt({formFields:n,setFlow:s,flow:i,allIntegURL:u,isInfo:x,edit:h}){const p=T(),{formID:S}=_(),[o,f]=d.useState(!1),[m,b]=d.useState(1),[e,c]=d.useState({show:!1}),j=[{key:"1",label:"Add commission to user's affiliate"}],r=[{key:"commission_date",label:"commission_date",required:!0},{key:"reference",label:"Reference",required:!1},{key:"amount",label:"Amount",required:!1}],[a,g]=d.useState({name:"SliceWp",type:"SliceWp",mainAction:"",field_map:[{formField:"",slicewpFormField:""}],allActions:j,sliceWpFields:r,actions:{}}),w=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!R(a)){c({show:!0,msg:l("Please map mandatory fields","bit-integrations")});return}a.mainAction!==""&&b(3)};return t.jsxs("div",{children:[t.jsx(E,{snack:e,setSnackbar:c}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(M,{step:3,active:m})}),t.jsx(K,{formID:S,sliceWpConf:a,setSliceWpConf:g,step:m,setStep:b,isLoading:o,setIsLoading:f,setSnackbar:c}),t.jsxs("div",{className:"btcd-stp-page",style:y({},m===2&&{width:900,height:"auto",overflow:"visible"}),children:[t.jsx(P,{formFields:n,handleInput:C=>H(C,a,g),sliceWpConf:a,setSliceWpConf:g,isLoading:o,setIsLoading:f,setSnackbar:c,allIntegURL:u,isInfo:x,edit:h}),t.jsxs("button",{onClick:()=>w(),disabled:!a.mainAction||o||a.statusId===void 0,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[l("Next","bit-integrations")," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),t.jsx(D,{step:m,saveConfig:()=>q({flow:i,setFlow:s,allIntegURL:u,navigate:p,conf:a,setIsLoading:f,setSnackbar:c}),isLoading:o,dataConf:a,setDataConf:g,formFields:n})]})}export{nt as default};
