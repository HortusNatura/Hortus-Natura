var N=Object.defineProperty;var x=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var j=(a,l,e)=>l in a?N(a,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[l]=e,d=(a,l)=>{for(var e in l||(l={}))_.call(l,e)&&j(a,e,l[e]);if(x)for(var e of x(l))g.call(l,e)&&j(a,e,l[e]);return a};import{r as y,m as w,j as t,L as I}from"./main-577.js";import{B as k,_ as m}from"./bi.655.81.js";import{h as M,a as S}from"./bi.787.676.js";import{S as A}from"./bi.622.681.js";import{T as q}from"./bi.933.682.js";const U=(a,l,e,s,n,i)=>{const o=d({},l),{name:u}=a.target;a.target.value!==""?o[u]=a.target.value:delete o[u],o[a.target.name]=a.target.value,e(d({},o))},L=a=>{const l=a==null?void 0:a.giveWpFields.filter(e=>e.required===!0);return l.length>0?l.map(e=>({formField:"",giveWpFormField:e.key})):[{formField:"",giveWpFormField:""}]},z=a=>!((a.field_map?a.field_map.filter(e=>!e.formField||!e.giveWpFormField):[]).length>0),$=(a,l,e)=>{const s=d({},l);s.field_map.splice(a,0,{}),e(d({},s))},R=(a,l,e)=>{const s=d({},l);s.field_map.length>1&&s.field_map.splice(a,1),e(d({},s))},p=(a,l,e,s)=>{const n=d({},e);n.field_map[l][a.target.name]=a.target.value,a.target.value==="custom"&&(n.field_map[l].customValue=""),s(d({},n))};function V({i:a,formFields:l,field:e,giveWpConf:s,setGiveWpConf:n}){var b;y.useEffect(()=>{var r;if(((r=s==null?void 0:s.field_map)==null?void 0:r.length)===1&&e.giveWpFormField===""){const c=d({},s),F=L(c);c.field_map=F,n(c)}},[]);const i=(s==null?void 0:s.giveWpFields.filter(r=>r.required===!0))||[],o=(s==null?void 0:s.giveWpFields.filter(r=>r.required===!1))||[],u=w(k),{isPro:h}=u;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:e.formField||"",onChange:r=>p(r,a,s,n),children:[t.jsx("option",{value:"",children:m("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:l==null?void 0:l.map(r=>t.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`))}),t.jsx("option",{value:"custom",children:m("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${h?"":"(PRO)"}`,children:h&&((b=A)==null?void 0:b.map(r=>t.jsx("option",{value:r.name,children:r.label},`ff-rm-${r.name}`)))})]}),e.formField==="custom"&&t.jsx(q,{onChange:r=>M(r,a,s,n),label:m("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:e.customValue,placeholder:m("Custom Value","bit-integrations"),formFields:l}),t.jsxs("select",{className:"btcd-paper-inp",disabled:a<i.length,name:"giveWpFormField",value:a<i.length?i[a].key||"":e.giveWpFormField||"",onChange:r=>p(r,a,s,n),children:[t.jsx("option",{value:"",children:m("Select Field","bit-integrations")}),a<i.length?t.jsx("option",{value:i[a].key,children:i[a].label},i[a].key):o.map(({key:r,label:c})=>t.jsx("option",{value:r,children:c},r))]})]}),a>=i.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>$(a,s,n),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>R(a,s,n),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function H({formFields:a,handleInput:l,giveWpConf:e,setGiveWpConf:s,isLoading:n,setIsLoading:i,setSnackbar:o,allIntegURL:u,isInfo:h,edit:b}){return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:m("Actions:","bit-integrations")}),t.jsxs("select",{onChange:l,name:"mainAction",value:e==null?void 0:e.mainAction,className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:m("Select Actions","bit-integrations")}),(e==null?void 0:e.allActions)&&e.allActions.map(({key:r,label:c})=>t.jsx("option",{value:r,children:c},r))]}),t.jsx("br",{}),t.jsx("br",{}),n&&t.jsx(I,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.jsx(t.Fragment,{children:["1"].includes(e==null?void 0:e.mainAction)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:m("Map Fields","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:m("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:m("GiveWp Fields","bit-integrations")})})]}),e.field_map.map((r,c)=>t.jsx(V,{i:c,field:r,giveWpConf:e,formFields:a,setGiveWpConf:s},`dash-m-${c+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>S(e.field_map.length,e,s),className:"icn-btn sh-sm",type:"button",children:"+"})})]})}),t.jsx("br",{})]})}export{H as G,z as c,U as h};
