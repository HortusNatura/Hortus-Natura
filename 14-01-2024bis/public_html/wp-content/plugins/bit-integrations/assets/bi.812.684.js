var T=Object.defineProperty;var k=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var I=(e,s,a)=>s in e?T(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,m=(e,s)=>{for(var a in s||(s={}))f.call(s,a)&&I(e,a,s[a]);if(k)for(var a of k(s))L.call(s,a)&&I(e,a,s[a]);return e};import{r as F,j as t,L as y,m as V}from"./main-577.js";import{a6 as S,_ as r,f as A,a7 as _,B as q,a8 as R}from"./bi.655.81.js";import{h as $,a as P}from"./bi.787.676.js";import{S as E}from"./bi.622.681.js";import{T as O}from"./bi.933.682.js";function B({sliceWpConf:e,setSliceWpConf:s,formFields:a}){var p,v;const[n,d]=F.useState(!1),[c,o]=F.useState({show:!1,action:()=>{}}),x=[{key:"pending",label:"Pending"},{key:"paid",label:"Paid"},{key:"unpaid",label:"Unpaid"},{key:"rejected",label:"Rejected"}],j=[{key:"sale",label:"Sale"},{key:"subscription",label:"Subscription"}],g=(i,h)=>{var w,N;const b=m({},e);h==="status"&&((w=i.target)!=null&&w.checked?(b.actions.status=!0,o({show:"status"})):(o({show:!1}),delete b.actions.status)),h==="types"&&((N=i.target)!=null&&N.checked?(b.actions.types=!0,o({show:"types"})):(o({show:!1}),delete b.actions.types)),s(m({},b))},l=()=>{o({show:!1})},u=(i,h)=>{const b=m({},e);h==="statusId"&&(i!==""?b[h]=i:delete b[h]),h==="typeId"&&(i!==""?b[h]=i:delete b[h]),s(m({},b))};return t.jsxs("div",{className:"pos-rel d-flx w-8",children:[t.jsx(S,{checked:((p=e==null?void 0:e.actions)==null?void 0:p.status)||!1,onChange:i=>g(i,"status"),className:"wdt-200 mt-4 mr-2",value:"status",title:r("Add Status","bit-integrations"),subTitle:r("Add status of SliceWp","bit-integrations")}),t.jsxs(A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:r("Ok","bit-integrations"),show:c.show==="status",close:l,action:l,title:r("Status","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:r("Select Status ","bit-integrations")}),n?t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(_,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.statusId,options:x.map(i=>({label:i.label,value:i.key})),onChange:i=>u(i,"statusId"),singleSelect:!0})})]}),t.jsx(S,{checked:((v=e==null?void 0:e.actions)==null?void 0:v.types)||!1,onChange:i=>g(i,"types"),className:"wdt-200 mt-4 mr-2",value:"types",title:r("Add Type","bit-integrations"),subTitle:r("Add Type","bit-integrations")}),t.jsxs(A,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:r("Ok","bit-integrations"),show:c.show==="types",close:l,action:l,title:r("Type","bit-integrations"),children:[t.jsx("div",{className:"btcd-hr mt-2 mb-2"}),t.jsx("div",{className:"mt-2",children:r("Select Type","bit-integrations")}),n?t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):t.jsx("div",{className:"flx flx-between mt-2",children:t.jsx(_,{className:"msl-wrp-options",defaultValue:e==null?void 0:e.typeId,options:j.map(i=>({label:i.label,value:i.key})),onChange:i=>u(i,"typeId"),singleSelect:!0})})]})]})}const Z=(e,s,a,n,d,c)=>{const o=m({},s),{name:x}=e.target;e.target.value!==""?o[x]=e.target.value:delete o[x],o[e.target.name]=e.target.value,a(m({},o))},H=e=>{const s=e==null?void 0:e.sliceWpFields.filter(a=>a.required===!0);return s.length>0?s.map(a=>({formField:"",slicewpFormField:a.key})):[{formField:"",slicewpFormField:""}]},C=e=>!((e.field_map?e.field_map.filter(a=>!a.formField||!a.slicewpFormField):[]).length>0),U=(e,s,a)=>{const n=m({},s);n.field_map.splice(e,0,{}),a(m({},n))},D=(e,s,a)=>{const n=m({},s);n.field_map.length>1&&n.field_map.splice(e,1),a(m({},n))},M=(e,s,a,n)=>{const d=m({},a);d.field_map[s][e.target.name]=e.target.value,e.target.value==="custom"&&(d.field_map[s].customValue=""),n(m({},d))};function G({i:e,formFields:s,field:a,sliceWpConf:n,setSliceWpConf:d}){var g;F.useEffect(()=>{var l;if(((l=n==null?void 0:n.field_map)==null?void 0:l.length)===1&&a.slicewpFormField===""){const u=m({},n),p=H(u);u.field_map=p,d(u)}},[]);const c=(n==null?void 0:n.sliceWpFields.filter(l=>l.required===!0))||[],o=(n==null?void 0:n.sliceWpFields.filter(l=>l.required===!1))||[],x=V(q),{isPro:j}=x;return t.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:t.jsxs("div",{className:"pos-rel flx",children:[t.jsxs("div",{className:"flx integ-fld-wrp",children:[t.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:l=>M(l,e,n,d),children:[t.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),t.jsx("optgroup",{label:"Form Fields",children:s==null?void 0:s.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),t.jsx("option",{value:"custom",children:r("Custom...","bit-integrations")}),t.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((g=E)==null?void 0:g.map(l=>t.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),a.formField==="custom"&&t.jsx(O,{onChange:l=>$(l,e,n,d),label:r("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:a.customValue,placeholder:r("Custom Value","bit-integrations"),formFields:s}),t.jsxs("select",{className:"btcd-paper-inp",disabled:e<c.length,name:"slicewpFormField",value:e<c.length?c[e].key||"":a.slicewpFormField||"",onChange:l=>M(l,e,n,d),children:[t.jsx("option",{value:"",children:r("Select Field","bit-integrations")}),e<c.length?t.jsx("option",{value:c[e].key,children:c[e].label},c[e].key):o.map(({key:l,label:u})=>t.jsx("option",{value:l,children:u},l))]})]}),e>=c.length&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>U(e,n,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),t.jsx("button",{onClick:()=>D(e,n,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:t.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function W({formFields:e,handleInput:s,sliceWpConf:a,setSliceWpConf:n,isLoading:d,setIsLoading:c,setSnackbar:o,allIntegURL:x,isInfo:j,edit:g}){return t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("b",{className:"wdt-200 d-in-b",children:r("Actions:","bit-integrations")}),t.jsxs("select",{onChange:s,name:"mainAction",value:a==null?void 0:a.mainAction,className:"btcd-paper-inp w-5",children:[t.jsx("option",{value:"",children:r("Select Actions","bit-integrations")}),(a==null?void 0:a.allActions)&&a.allActions.map(({key:l,label:u})=>t.jsx("option",{value:l,children:u},l))]}),t.jsx("br",{}),t.jsx("br",{}),d&&t.jsx(y,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.jsxs(t.Fragment,{children:[["1"].includes(a==null?void 0:a.mainAction)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:r("Map Fields","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:r("Form Fields","bit-integrations")})}),t.jsx("div",{className:"txt-dp",children:t.jsx("b",{children:r("SliceWp Fields","bit-integrations")})})]}),a.field_map.map((l,u)=>t.jsx(G,{i:u,field:l,sliceWpConf:a,formFields:e,setSliceWpConf:n},`dash-m-${u+9}`)),t.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:t.jsx("button",{onClick:()=>P(a.field_map.length,a,n),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),t.jsx("br",{}),t.jsx("br",{}),a.mainAction==="1"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mt-4",children:t.jsx("b",{className:"wdt-100",children:r("Actions","bit-integrations")})}),t.jsx("div",{className:"btcd-hr mt-1"}),t.jsx(B,{sliceWpConf:a,setSliceWpConf:n,formFields:e})]})]}),t.jsx("br",{}),t.jsx(R,{note:"Some integrations will only work for logged-in users."})]})}export{W as S,C as c,Z as h};
